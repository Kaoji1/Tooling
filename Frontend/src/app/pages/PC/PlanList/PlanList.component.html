<div class="layout">
  <app-sidebar></app-sidebar>

  <div class="content-area">

    <h2 class="mb-4">PC Plan List</h2>

    <div class="filter-section">

      <div class="filter-group">
        <label>Date</label>
        <input type="date" [(ngModel)]="filterDate">
      </div>

      <div class="filter-group">
        <label>Division</label>
        <select [(ngModel)]="filterDivision">
          <option value="">All</option>
          <option *ngFor="let div of divisions" [value]="div">{{ div }}</option>
        </select>
      </div>

      <div class="filter-group">
        <label>Machine Type</label>
        <select [(ngModel)]="filterMachineType">
          <option value="">All</option>
          <option *ngFor="let m of machineTypes" [value]="m">{{ m }}</option>
        </select>
      </div>

    </div>

    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>Plan Date</th>
            <th>MC Type</th>
            <th>Division</th>
            <th>Fac</th>
            <th>Process</th>
            <th>Part Before</th>
            <th>MC No.</th>
            <th>Part No.</th>
            <th>QTY</th>
            <th>Time</th>
            <th>Comment</th>
            <th>Path Dwg</th>
            <th>Path Layout</th>
            <th>IIQC</th>
            <th class="text-center">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of planList; let i = index" [ngClass]="{
                'row-complete': (item.pathDwg && item.pathDwg !== '-' && item.pathLayout && item.pathLayout !== '-' && item.iiqc && item.iiqc !== '-'),
                'row-incomplete': (!item.pathDwg || item.pathDwg === '-' || !item.pathLayout || item.pathLayout === '-' || !item.iiqc || item.iiqc === '-')
              }">
            <td>{{ item.date }}</td>
            <td>{{ item.mcType }}</td>
            <td>{{ item.division }}</td>
            <td>{{ item.fac }}</td>
            <td>{{ item.process }}</td>
            <td>{{ item.partBefore }}</td>
            <td>{{ item.mcNo }}</td>
            <td>{{ item.partNo }}</td>
            <td>{{ item.qty }}</td>
            <td>{{ item.time }}</td>
            <td>{{ item.comment }}</td>
            <td>{{ item.pathDwg }}</td>
            <td>{{ item.pathLayout }}</td>
            <td>{{ item.iiqc }}</td>

            <td style="text-align: center; white-space: nowrap;">
              <button class="btn-action edit me-1" (click)="onEdit(item)" title="Edit">
                <i class="bi bi-pencil-square"></i>
              </button>
              <button class="btn-action delete" (click)="onDelete(item)" title="Delete">
                <i class="bi bi-trash-fill"></i>
              </button>
            </td>
          </tr>
          <tr *ngIf="planList.length === 0">
            <td colspan="15" style="text-align: center; padding: 2rem; color: #64748b;">No data found</td>
          </tr>
        </tbody>
      </table>
    </div>

  </div>
</div>